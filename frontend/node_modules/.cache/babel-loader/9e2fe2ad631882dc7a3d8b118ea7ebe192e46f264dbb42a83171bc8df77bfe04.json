{"ast":null,"code":"import React,{useState}from'react';import{useAuthStore}from'../store/authStore';import{useSessionTimer}from'../hooks/useSessionTimer';import toast from'react-hot-toast';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const SessionExtensionButton=_ref=>{let{className='',autoShow=true}=_ref;const[isExtending,setIsExtending]=useState(false);const{token,validateSession}=useAuthStore();const{isExpiringSoon}=useSessionTimer();// Nicht anzeigen wenn nicht eingeloggt oder nicht bald ablaufend (wenn autoShow aktiv)\nif(!token||autoShow&&!isExpiringSoon){return null;}const handleExtendSession=async()=>{setIsExtending(true);try{// Session durch API-Call \"verlängern\" (Token wird automatisch refreshed wenn möglich)\nconst isValid=await validateSession();if(isValid){toast.success('Session wurde erfolgreich verlängert!',{duration:3000,icon:'✅'});}else{toast.error('Session konnte nicht verlängert werden. Bitte melden Sie sich erneut an.');}}catch(error){toast.error('Fehler beim Verlängern der Session.');}finally{setIsExtending(false);}};return/*#__PURE__*/_jsx(\"button\",{onClick:handleExtendSession,disabled:isExtending,className:`inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-orange-700 bg-orange-100 border border-orange-300 rounded-lg hover:bg-orange-200 focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 ${className}`,children:isExtending?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-orange-600 border-t-transparent rounded-full animate-spin\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Verl\\xE4ngere...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Session verl\\xE4ngern\"})]})});};export default SessionExtensionButton;","map":{"version":3,"names":["React","useState","useAuthStore","useSessionTimer","toast","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SessionExtensionButton","_ref","className","autoShow","isExtending","setIsExtending","token","validateSession","isExpiringSoon","handleExtendSession","isValid","success","duration","icon","error","onClick","disabled","children","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d"],"sources":["/Users/renesuss/Development/Tools/src/guestbook-project/frontend/src/components/SessionExtensionButton.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useAuthStore } from '../store/authStore';\nimport { useSessionTimer } from '../hooks/useSessionTimer';\nimport toast from 'react-hot-toast';\n\ninterface SessionExtensionButtonProps {\n  className?: string;\n  autoShow?: boolean; // Automatisch anzeigen wenn Session bald abläuft\n}\n\nconst SessionExtensionButton: React.FC<SessionExtensionButtonProps> = ({ \n  className = '',\n  autoShow = true \n}) => {\n  const [isExtending, setIsExtending] = useState(false);\n  const { token, validateSession } = useAuthStore();\n  const { isExpiringSoon } = useSessionTimer();\n\n  // Nicht anzeigen wenn nicht eingeloggt oder nicht bald ablaufend (wenn autoShow aktiv)\n  if (!token || (autoShow && !isExpiringSoon)) {\n    return null;\n  }\n\n  const handleExtendSession = async () => {\n    setIsExtending(true);\n    try {\n      // Session durch API-Call \"verlängern\" (Token wird automatisch refreshed wenn möglich)\n      const isValid = await validateSession();\n      if (isValid) {\n        toast.success('Session wurde erfolgreich verlängert!', {\n          duration: 3000,\n          icon: '✅',\n        });\n      } else {\n        toast.error('Session konnte nicht verlängert werden. Bitte melden Sie sich erneut an.');\n      }\n    } catch (error) {\n      toast.error('Fehler beim Verlängern der Session.');\n    } finally {\n      setIsExtending(false);\n    }\n  };\n\n  return (\n    <button\n      onClick={handleExtendSession}\n      disabled={isExtending}\n      className={`inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-orange-700 bg-orange-100 border border-orange-300 rounded-lg hover:bg-orange-200 focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 ${className}`}\n    >\n      {isExtending ? (\n        <>\n          <div className=\"w-4 h-4 border-2 border-orange-600 border-t-transparent rounded-full animate-spin\" />\n          <span>Verlängere...</span>\n        </>\n      ) : (\n        <>\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          <span>Session verlängern</span>\n        </>\n      )}\n    </button>\n  );\n};\n\nexport default SessionExtensionButton;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,YAAY,KAAQ,oBAAoB,CACjD,OAASC,eAAe,KAAQ,0BAA0B,CAC1D,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAOpC,KAAM,CAAAC,sBAA6D,CAAGC,IAAA,EAGhE,IAHiE,CACrEC,SAAS,CAAG,EAAE,CACdC,QAAQ,CAAG,IACb,CAAC,CAAAF,IAAA,CACC,KAAM,CAACG,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAEgB,KAAK,CAAEC,eAAgB,CAAC,CAAGhB,YAAY,CAAC,CAAC,CACjD,KAAM,CAAEiB,cAAe,CAAC,CAAGhB,eAAe,CAAC,CAAC,CAE5C;AACA,GAAI,CAACc,KAAK,EAAKH,QAAQ,EAAI,CAACK,cAAe,CAAE,CAC3C,MAAO,KAAI,CACb,CAEA,KAAM,CAAAC,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtCJ,cAAc,CAAC,IAAI,CAAC,CACpB,GAAI,CACF;AACA,KAAM,CAAAK,OAAO,CAAG,KAAM,CAAAH,eAAe,CAAC,CAAC,CACvC,GAAIG,OAAO,CAAE,CACXjB,KAAK,CAACkB,OAAO,CAAC,uCAAuC,CAAE,CACrDC,QAAQ,CAAE,IAAI,CACdC,IAAI,CAAE,GACR,CAAC,CAAC,CACJ,CAAC,IAAM,CACLpB,KAAK,CAACqB,KAAK,CAAC,0EAA0E,CAAC,CACzF,CACF,CAAE,MAAOA,KAAK,CAAE,CACdrB,KAAK,CAACqB,KAAK,CAAC,qCAAqC,CAAC,CACpD,CAAC,OAAS,CACRT,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,mBACEV,IAAA,WACEoB,OAAO,CAAEN,mBAAoB,CAC7BO,QAAQ,CAAEZ,WAAY,CACtBF,SAAS,CAAE,wRAAwRA,SAAS,EAAG,CAAAe,QAAA,CAE9Sb,WAAW,cACVL,KAAA,CAAAF,SAAA,EAAAoB,QAAA,eACEtB,IAAA,QAAKO,SAAS,CAAC,mFAAmF,CAAE,CAAC,cACrGP,IAAA,SAAAsB,QAAA,CAAM,kBAAa,CAAM,CAAC,EAC1B,CAAC,cAEHlB,KAAA,CAAAF,SAAA,EAAAoB,QAAA,eACEtB,IAAA,QAAKO,SAAS,CAAC,SAAS,CAACgB,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAH,QAAA,cAC5EtB,IAAA,SAAM0B,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,6CAA6C,CAAE,CAAC,CAClH,CAAC,cACN7B,IAAA,SAAAsB,QAAA,CAAM,uBAAkB,CAAM,CAAC,EAC/B,CACH,CACK,CAAC,CAEb,CAAC,CAED,cAAe,CAAAjB,sBAAsB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}