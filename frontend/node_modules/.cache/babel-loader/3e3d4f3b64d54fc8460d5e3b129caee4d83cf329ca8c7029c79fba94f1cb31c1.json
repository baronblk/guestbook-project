{"ast":null,"code":"import React,{useEffect}from'react';import{useReviewStore}from'../store/reviewStore';import RatingStars from'./RatingStars';import Pagination from'./Pagination';import{apiUtils}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReviewList=_ref=>{let{embedded=false}=_ref;const{reviews,loading,error,pagination,fetchReviews,setPage,clearError}=useReviewStore();useEffect(()=>{fetchReviews();},[fetchReviews]);if(loading&&reviews.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-600\",children:\"Bewertungen werden geladen...\"})]});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-md p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-red-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800\",children:\"Fehler beim Laden der Bewertungen\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-sm text-red-700\",children:/*#__PURE__*/_jsx(\"p\",{children:error})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bg-red-100 px-2 py-1 text-sm text-red-800 rounded hover:bg-red-200\",onClick:()=>{clearError();fetchReviews();},children:\"Erneut versuchen\"})})]})]})});}if(reviews.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-1l-4 4z\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Keine Bewertungen vorhanden\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Seien Sie der erste, der eine Bewertung abgibt!\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[!embedded&&/*#__PURE__*/_jsx(\"div\",{className:\"filter-controls\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Filtern:\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:reviews.map(review=>/*#__PURE__*/_jsxs(\"div\",{className:`review-card ${review.is_featured?'featured':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:review.name}),review.title&&/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm text-gray-600 mt-1\",children:review.title})]}),review.is_featured&&/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-warning\",children:\"Empfohlen\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(RatingStars,{rating:review.rating})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700 mb-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"whitespace-pre-wrap\",children:embedded?apiUtils.truncateText(review.content,150):review.content})}),review.image_path&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"img\",{src:`${process.env.REACT_APP_API_URL||'http://localhost:8000'}${review.image_path}`,alt:\"Bewertungsbild\",className:\"max-w-full h-48 object-cover rounded-lg border border-gray-300\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between text-sm text-gray-500 border-t border-gray-200 pt-3\",children:/*#__PURE__*/_jsx(\"time\",{dateTime:review.created_at,children:apiUtils.formatDate(review.created_at)})})]},review.id))}),!embedded&&pagination.total_pages>1&&/*#__PURE__*/_jsx(Pagination,{currentPage:pagination.page,totalPages:pagination.total_pages,onPageChange:setPage}),loading&&reviews.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center py-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-600\",children:\"L\\xE4dt...\"})]})]});};export default ReviewList;","map":{"version":3,"names":["React","useEffect","useReviewStore","RatingStars","Pagination","apiUtils","jsx","_jsx","jsxs","_jsxs","ReviewList","_ref","embedded","reviews","loading","error","pagination","fetchReviews","setPage","clearError","length","className","children","viewBox","fill","fillRule","d","clipRule","type","onClick","stroke","strokeLinecap","strokeLinejoin","strokeWidth","map","review","is_featured","name","title","rating","truncateText","content","image_path","src","process","env","REACT_APP_API_URL","alt","dateTime","created_at","formatDate","id","total_pages","currentPage","page","totalPages","onPageChange"],"sources":["/Users/renesuss/Development/Tools/src/guestbook-project/frontend/src/components/ReviewList.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useReviewStore } from '../store/reviewStore';\nimport RatingStars from './RatingStars';\nimport Pagination from './Pagination';\nimport { apiUtils } from '../api';\n\ninterface ReviewListProps {\n  embedded?: boolean;\n}\n\nconst ReviewList: React.FC<ReviewListProps> = ({ embedded = false }) => {\n  const {\n    reviews,\n    loading,\n    error,\n    pagination,\n    fetchReviews,\n    setPage,\n    clearError,\n  } = useReviewStore();\n\n  useEffect(() => {\n    fetchReviews();\n  }, [fetchReviews]);\n\n  if (loading && reviews.length === 0) {\n    return (\n      <div className=\"flex justify-center items-center py-12\">\n        <div className=\"spinner\" />\n        <span className=\"ml-2 text-gray-600\">Bewertungen werden geladen...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n        <div className=\"flex\">\n          <div className=\"flex-shrink-0\">\n            <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n            </svg>\n          </div>\n          <div className=\"ml-3\">\n            <h3 className=\"text-sm font-medium text-red-800\">\n              Fehler beim Laden der Bewertungen\n            </h3>\n            <div className=\"mt-2 text-sm text-red-700\">\n              <p>{error}</p>\n            </div>\n            <div className=\"mt-4\">\n              <button\n                type=\"button\"\n                className=\"bg-red-100 px-2 py-1 text-sm text-red-800 rounded hover:bg-red-200\"\n                onClick={() => {\n                  clearError();\n                  fetchReviews();\n                }}\n              >\n                Erneut versuchen\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (reviews.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <svg\n          className=\"mx-auto h-12 w-12 text-gray-400\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-1l-4 4z\"\n          />\n        </svg>\n        <h3 className=\"mt-2 text-sm font-medium text-gray-900\">\n          Keine Bewertungen vorhanden\n        </h3>\n        <p className=\"mt-1 text-sm text-gray-500\">\n          Seien Sie der erste, der eine Bewertung abgibt!\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Filter Controls (nur wenn nicht embedded) */}\n      {!embedded && (\n        <div className=\"filter-controls\">\n          <div className=\"flex items-center space-x-4\">\n            <span className=\"text-sm font-medium text-gray-700\">Filtern:</span>\n            {/* Hier könnten Filter-Controls eingefügt werden */}\n          </div>\n        </div>\n      )}\n\n      {/* Reviews */}\n      <div className=\"space-y-4\">\n        {reviews.map((review) => (\n          <div\n            key={review.id}\n            className={`review-card ${review.is_featured ? 'featured' : ''}`}\n          >\n            {/* Header */}\n            <div className=\"flex items-start justify-between mb-3\">\n              <div>\n                <h3 className=\"font-semibold text-gray-900\">{review.name}</h3>\n                {review.title && (\n                  <h4 className=\"text-sm text-gray-600 mt-1\">{review.title}</h4>\n                )}\n              </div>\n              {review.is_featured && (\n                <span className=\"badge badge-warning\">Empfohlen</span>\n              )}\n            </div>\n\n            {/* Rating */}\n            <div className=\"mb-3\">\n              <RatingStars rating={review.rating} />\n            </div>\n\n            {/* Content */}\n            <div className=\"text-gray-700 mb-4\">\n              <p className=\"whitespace-pre-wrap\">\n                {embedded \n                  ? apiUtils.truncateText(review.content, 150)\n                  : review.content\n                }\n              </p>\n            </div>\n\n            {/* Image */}\n            {review.image_path && (\n              <div className=\"mb-4\">\n                <img\n                  src={`${process.env.REACT_APP_API_URL || 'http://localhost:8000'}${review.image_path}`}\n                  alt=\"Bewertungsbild\"\n                  className=\"max-w-full h-48 object-cover rounded-lg border border-gray-300\"\n                />\n              </div>\n            )}\n\n            {/* Footer */}\n            <div className=\"flex items-center justify-between text-sm text-gray-500 border-t border-gray-200 pt-3\">\n              <time dateTime={review.created_at}>\n                {apiUtils.formatDate(review.created_at)}\n              </time>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Pagination (nur wenn nicht embedded) */}\n      {!embedded && pagination.total_pages > 1 && (\n        <Pagination\n          currentPage={pagination.page}\n          totalPages={pagination.total_pages}\n          onPageChange={setPage}\n        />\n      )}\n\n      {/* Loading overlay für zusätzliche Seiten */}\n      {loading && reviews.length > 0 && (\n        <div className=\"flex justify-center py-4\">\n          <div className=\"spinner\" />\n          <span className=\"ml-2 text-gray-600\">Lädt...</span>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ReviewList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}