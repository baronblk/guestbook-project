{"ast":null,"code":"import axios from'axios';// Base API configuration\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:8000';const api=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'}});// Request interceptor to add auth token\napi.interceptors.request.use(config=>{const token=localStorage.getItem('admin_token');if(token){config.headers.Authorization=`Bearer ${token}`;}return config;});// Response interceptor for error handling\napi.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){localStorage.removeItem('admin_token');window.location.href='/admin/login';}return Promise.reject(error);});// Public API\nexport const publicApi={// Reviews\nasync getReviews(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const response=await api.get('/api/reviews',{params});return response.data;},async getReview(id){const response=await api.get(`/api/reviews/${id}`);return response.data;},async createReview(reviewData){const response=await api.post('/api/reviews',reviewData);return response.data;},async uploadReviewImage(reviewId,file){const formData=new FormData();formData.append('file',file);const response=await api.post(`/api/reviews/${reviewId}/image`,formData,{headers:{'Content-Type':'multipart/form-data'}});return response.data;},async getStats(){const response=await api.get('/api/stats');return response.data;}};// Admin API\nexport const adminApi={// Auth\nasync login(credentials){const response=await api.post('/api/admin/login',null,{params:credentials});return response.data;},// Admin User Management\nasync createAdmin(data){const response=await api.post('/api/admin/users',data);return response.data;},// Reviews Management\nasync getReviews(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const response=await api.get('/api/admin/reviews',{params});return response.data;},async updateReview(id,updateData){const response=await api.put(`/api/admin/reviews/${id}`,updateData);return response.data;},async deleteReview(id){const response=await api.delete(`/api/admin/reviews/${id}`);return response.data;},// Import/Export\nasync importData(importData){const response=await api.post('/api/admin/import',importData);return response.data;},async exportData(){const response=await api.get('/api/admin/export');return response.data;},async importReviews(importData){const response=await api.post('/api/admin/reviews/import',importData);return response.data;},async getStats(){const response=await api.get('/api/admin/stats');return response.data;},async exportReviews(){const response=await api.get('/api/admin/export',{responseType:'blob'});return response.data;}};// Utility functions\nexport const apiUtils={handleApiError(error){var _error$response2,_error$response2$data;if((_error$response2=error.response)!==null&&_error$response2!==void 0&&(_error$response2$data=_error$response2.data)!==null&&_error$response2$data!==void 0&&_error$response2$data.message){return error.response.data.message;}if(error.message){return error.message;}return'Ein unbekannter Fehler ist aufgetreten';},downloadFile(blob,filename){const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=filename;document.body.appendChild(a);a.click();document.body.removeChild(a);window.URL.revokeObjectURL(url);},formatDate(dateString){return new Date(dateString).toLocaleDateString('de-DE',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});},formatRating(rating){return'★'.repeat(rating)+'☆'.repeat(5-rating);},truncateText(text){let maxLength=arguments.length>1&&arguments[1]!==undefined?arguments[1]:200;if(text.length<=maxLength)return text;return text.substring(0,maxLength).trim()+'...';}};export default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","_error$response","status","removeItem","window","location","href","Promise","reject","publicApi","getReviews","params","arguments","length","undefined","get","data","getReview","id","createReview","reviewData","post","uploadReviewImage","reviewId","file","formData","FormData","append","getStats","adminApi","login","credentials","createAdmin","updateReview","updateData","put","deleteReview","delete","importData","exportData","importReviews","exportReviews","responseType","apiUtils","handleApiError","_error$response2","_error$response2$data","message","downloadFile","blob","filename","url","URL","createObjectURL","a","document","createElement","download","body","appendChild","click","removeChild","revokeObjectURL","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","formatRating","rating","repeat","truncateText","text","maxLength","substring","trim"],"sources":["/Users/renesuss/Development/Tools/src/guestbook-project/frontend/src/api.ts"],"sourcesContent":["import axios, { AxiosResponse } from 'axios';\nimport { \n  Review, \n  ReviewListResponse, \n  CreateReviewForm, \n  UpdateReviewForm,\n  ReviewStats,\n  Token,\n  LoginForm,\n  AdminReview,\n  AdminUser\n} from './types';\n\n// Base API configuration\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('admin_token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      localStorage.removeItem('admin_token');\n      window.location.href = '/admin/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Public API\nexport const publicApi = {\n  // Reviews\n  async getReviews(params: {\n    page?: number;\n    per_page?: number;\n    rating?: number;\n    featured_only?: boolean;\n    search?: string;\n    sort_by?: string;\n    sort_order?: string;\n  } = {}): Promise<ReviewListResponse> {\n    const response: AxiosResponse<ReviewListResponse> = await api.get('/api/reviews', { params });\n    return response.data;\n  },\n\n  async getReview(id: number): Promise<Review> {\n    const response: AxiosResponse<Review> = await api.get(`/api/reviews/${id}`);\n    return response.data;\n  },\n\n  async createReview(reviewData: CreateReviewForm): Promise<Review> {\n    const response: AxiosResponse<Review> = await api.post('/api/reviews', reviewData);\n    return response.data;\n  },\n\n  async uploadReviewImage(reviewId: number, file: File): Promise<{ image_path: string }> {\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    const response: AxiosResponse<{ image_path: string }> = await api.post(\n      `/api/reviews/${reviewId}/image`,\n      formData,\n      {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      }\n    );\n    return response.data;\n  },\n\n  async getStats(): Promise<ReviewStats> {\n    const response: AxiosResponse<ReviewStats> = await api.get('/api/stats');\n    return response.data;\n  },\n};\n\n// Admin API\nexport const adminApi = {\n  // Auth\n  async login(credentials: LoginForm): Promise<Token> {\n    const response: AxiosResponse<Token> = await api.post('/api/admin/login', null, {\n      params: credentials\n    });\n    return response.data;\n  },\n\n  // Admin User Management\n  async createAdmin(data: { username: string; email: string; password: string }): Promise<AdminUser> {\n    const response: AxiosResponse<AdminUser> = await api.post('/api/admin/users', data);\n    return response.data;\n  },\n\n  // Reviews Management\n  async getReviews(params: {\n    page?: number;\n    per_page?: number;\n    approved_only?: boolean;\n  } = {}): Promise<ReviewListResponse> {\n    const response: AxiosResponse<ReviewListResponse> = await api.get('/api/admin/reviews', { params });\n    return response.data;\n  },\n\n  async updateReview(id: number, updateData: UpdateReviewForm): Promise<AdminReview> {\n    const response: AxiosResponse<AdminReview> = await api.put(`/api/admin/reviews/${id}`, updateData);\n    return response.data;\n  },\n\n  async deleteReview(id: number): Promise<{ message: string }> {\n    const response: AxiosResponse<{ message: string }> = await api.delete(`/api/admin/reviews/${id}`);\n    return response.data;\n  },\n\n  // Import/Export\n  async importData(importData: {\n    reviews: Review[];\n    exported_at: string;\n  }): Promise<{ message: string; imported_count: number }> {\n    const response = await api.post('/api/admin/import', importData);\n    return response.data;\n  },\n\n  async exportData(): Promise<{\n    reviews: Review[];\n    stats: ReviewStats;\n    exported_at: string;\n  }> {\n    const response = await api.get('/api/admin/export');\n    return response.data;\n  },\n\n  async importReviews(importData: {\n    reviews: Array<{\n      name: string;\n      rating: number;\n      content: string;\n      title?: string;\n      email?: string;\n      created_at?: string;\n      import_source?: string;\n      external_id?: string;\n    }>;\n    source: string;\n  }): Promise<{ message: string; imported_count: number }> {\n    const response = await api.post('/api/admin/reviews/import', importData);\n    return response.data;\n  },\n\n  async getStats(): Promise<ReviewStats> {\n    const response: AxiosResponse<ReviewStats> = await api.get('/api/admin/stats');\n    return response.data;\n  },\n\n  async exportReviews(): Promise<Blob> {\n    const response = await api.get('/api/admin/export', {\n      responseType: 'blob',\n    });\n    return response.data;\n  },\n};\n\n// Utility functions\nexport const apiUtils = {\n  handleApiError(error: any): string {\n    if (error.response?.data?.message) {\n      return error.response.data.message;\n    }\n    if (error.message) {\n      return error.message;\n    }\n    return 'Ein unbekannter Fehler ist aufgetreten';\n  },\n\n  downloadFile(blob: Blob, filename: string): void {\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  },\n\n  formatDate(dateString: string): string {\n    return new Date(dateString).toLocaleDateString('de-DE', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  },\n\n  formatRating(rating: number): string {\n    return '★'.repeat(rating) + '☆'.repeat(5 - rating);\n  },\n\n  truncateText(text: string, maxLength: number = 200): string {\n    if (text.length <= maxLength) return text;\n    return text.substring(0, maxLength).trim() + '...';\n  },\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}